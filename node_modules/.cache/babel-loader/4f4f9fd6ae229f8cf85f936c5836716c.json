{"ast":null,"code":"import _classCallCheck from\"/home/kali/demo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kali/demo/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/kali/demo/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/kali/demo/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import{FaCircleNotch}from'react-icons/fa';import selectCoins from'../selectors/coins';import{editCoin as _editCoin}from'../actions/coins';import{addFavorite as _addFavorite,removeFavorite as _removeFavorite}from'../actions/favorites';import{setTextFilter as _setTextFilter}from'../actions/filters';import FavoriteCoins from'./FavoriteCoins';import FavoriteTile from'./FavoriteTile';import Scroller from'./Scroller';var cc=require('cryptocompare');cc.setApiKey(process.env.REACT_APP_CRYPTO_COMPARE_API_KEY);export var SettingsPage=/*#__PURE__*/function(_React$Component){_inherits(SettingsPage,_React$Component);var _super=_createSuper(SettingsPage);function SettingsPage(){var _this;_classCallCheck(this,SettingsPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={firstVisit:true};_this.componentDidMount=function(){if(_this.props.favorites.length>0){_this.setState(function(){return{firstVisit:false};});}};_this.componentDidUpdate=function(){var json=JSON.stringify(_this.props.favorites);localStorage.setItem('cryptodashFavorites',json);};_this.componentWillUnmount=function(){_this.props.setTextFilter('');};_this.handleAddFavorite=function(e){_this.props.addFavorite(e.target.id);_this.fetchPrice(e.target.id);};_this.handleRemoveFavorite=function(e){_this.props.removeFavorite(e.target.id);if(e.target.id===localStorage.getItem('cryptodashCurrentFavorite')){localStorage.removeItem('cryptodashCurrentFavorite');}};_this.fetchPrice=function(symbol){var currency='USD';cc.priceFull(symbol,[currency]).then(function(price){_this.props.editCoin(symbol,{price:price[symbol][currency].PRICE,changeDay:price[symbol][currency].CHANGEDAY,changePctDay:price[symbol][currency].CHANGEPCTDAY,mktCap:price[symbol][currency].MKTCAP,totalVol24hr:price[symbol][currency].VOLUMEDAY,supply:price[symbol][currency].SUPPLY,high24hr:price[symbol][currency].HIGH24HOUR,low24hr:price[symbol][currency].LOW24HOUR});}).catch(console.error);};_this.handleTextChange=function(e){_this.props.setTextFilter(e.target.value);};return _this;}_createClass(SettingsPage,[{key:\"render\",value:function render(){var _this2=this;var favoriteCoins=this.props.coins.filter(function(coin){return _this2.props.favorites.includes(coin.symbol);});var tileType='more';if(this.props.favorites.length>=12){tileType='disabled';}return/*#__PURE__*/React.createElement(\"div\",{className:\"content-container\"},this.state.firstVisit?/*#__PURE__*/React.createElement(\"h1\",null,\"Hello. Pick your favorite coins to populate your dashboard.\"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Your favorite coins\")),favoriteCoins.length>0&&/*#__PURE__*/React.createElement(\"h4\",{className:\"dash-link\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Go to you dashboard now \\xBB\")),/*#__PURE__*/React.createElement(FavoriteCoins,{coins:favoriteCoins,clickEvent:this.handleRemoveFavorite,tileType:\"favorite\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"index-header\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"text-input\",placeholder:\"Search coins\",value:this.props.filters.text,onChange:this.handleTextChange}),/*#__PURE__*/React.createElement(\"h2\",null,\"Add up to 12 favorites\")),this.props.coins.length===0?/*#__PURE__*/React.createElement(\"div\",{className:\"loading__notificaton\"},\"Loading coin data\",/*#__PURE__*/React.createElement(FaCircleNotch,{size:\"2.4rem\",className:\"fa-spin\"})):(this.props.visibleCoins&&this.props.visibleCoins.length)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Scroller,{className:\"fave-list fave-list--more\",sliceSize:\"25\"},this.props.visibleCoins.filter(function(coin){return!_this2.props.favorites.includes(coin.symbol);}).map(function(coin){return/*#__PURE__*/React.createElement(FavoriteTile,{key:coin.symbol,coin:coin,clickEvent:_this2.handleAddFavorite,tileType:tileType});}))):/*#__PURE__*/React.createElement(\"div\",{className:\"loading__notificaton\"},\"No coins found\"));}}]);return SettingsPage;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{coins:state.coins,visibleCoins:selectCoins(state.coins,state.filters),favorites:state.favorites,filters:state.filters};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addFavorite:function addFavorite(favorite){return dispatch(_addFavorite(favorite));},removeFavorite:function removeFavorite(favorite){return dispatch(_removeFavorite(favorite));},editCoin:function editCoin(symbol,updates){return dispatch(_editCoin(symbol,updates));},setTextFilter:function setTextFilter(text){return dispatch(_setTextFilter(text));}};};export default connect(mapStateToProps,mapDispatchToProps)(SettingsPage);","map":{"version":3,"sources":["/home/kali/demo/src/components/SettingsPage.js"],"names":["React","connect","Link","FaCircleNotch","selectCoins","editCoin","addFavorite","removeFavorite","setTextFilter","FavoriteCoins","FavoriteTile","Scroller","cc","require","setApiKey","process","env","REACT_APP_CRYPTO_COMPARE_API_KEY","SettingsPage","state","firstVisit","componentDidMount","props","favorites","length","setState","componentDidUpdate","json","JSON","stringify","localStorage","setItem","componentWillUnmount","handleAddFavorite","e","target","id","fetchPrice","handleRemoveFavorite","getItem","removeItem","symbol","currency","priceFull","then","price","PRICE","changeDay","CHANGEDAY","changePctDay","CHANGEPCTDAY","mktCap","MKTCAP","totalVol24hr","VOLUMEDAY","supply","SUPPLY","high24hr","HIGH24HOUR","low24hr","LOW24HOUR","catch","console","error","handleTextChange","value","favoriteCoins","coins","filter","coin","includes","tileType","filters","text","visibleCoins","map","Component","mapStateToProps","mapDispatchToProps","dispatch","favorite","updates"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { FaCircleNotch } from 'react-icons/fa'\nimport selectCoins from '../selectors/coins'\nimport { editCoin } from '../actions/coins'\nimport { addFavorite, removeFavorite } from '../actions/favorites'\nimport { setTextFilter } from '../actions/filters'\nimport FavoriteCoins from './FavoriteCoins'\nimport FavoriteTile from './FavoriteTile'\nimport Scroller from './Scroller'\n\nconst cc = require('cryptocompare')\ncc.setApiKey(process.env.REACT_APP_CRYPTO_COMPARE_API_KEY)\n\nexport class SettingsPage extends React.Component {\n  state = {\n    firstVisit: true\n  }\n  componentDidMount = () => {\n    if (this.props.favorites.length > 0) {\n      this.setState(() => ({ firstVisit: false }))\n    }\n  }\n  componentDidUpdate = () => {\n    const json = JSON.stringify(this.props.favorites)\n    localStorage.setItem('cryptodashFavorites', json)\n  }\n  componentWillUnmount = () => {\n    this.props.setTextFilter('')\n  }\n  handleAddFavorite = (e) => {\n    this.props.addFavorite(e.target.id)\n    this.fetchPrice(e.target.id)\n  }\n  handleRemoveFavorite = (e) => {\n    this.props.removeFavorite(e.target.id)\n    if(e.target.id === localStorage.getItem('cryptodashCurrentFavorite')) {\n      localStorage.removeItem('cryptodashCurrentFavorite')\n    }\n  }\n  fetchPrice = (symbol) => {\n    const currency = 'USD';\n    cc.priceFull(symbol, [currency]).then(price => {\n      this.props.editCoin(symbol, {\n        price: price[symbol][currency].PRICE,\n        changeDay: price[symbol][currency].CHANGEDAY,\n        changePctDay: price[symbol][currency].CHANGEPCTDAY,\n        mktCap: price[symbol][currency].MKTCAP,\n        totalVol24hr: price[symbol][currency].VOLUMEDAY,\n        supply: price[symbol][currency].SUPPLY,\n        high24hr: price[symbol][currency].HIGH24HOUR,\n        low24hr: price[symbol][currency].LOW24HOUR\n      })\n    }).catch(console.error)\n  }\n  handleTextChange = (e) => {\n    this.props.setTextFilter(e.target.value)\n  }\n  render() {\n    const favoriteCoins = this.props.coins.filter(coin => this.props.favorites.includes(coin.symbol))\n    let tileType = 'more'\n    if (this.props.favorites.length >= 12) {\n      tileType = 'disabled'\n    }\n    return (\n      <div className=\"content-container\">\n        {this.state.firstVisit ? (\n          <h1>Hello. Pick your favorite coins to populate your dashboard.</h1>\n        ) : (\n          <>\n            <h1>Your favorite coins</h1>\n          </>\n        )}\n        {favoriteCoins.length > 0 && <h4 className=\"dash-link\"><Link to=\"/\">Go to you dashboard now &raquo;</Link></h4>}\n        <FavoriteCoins coins={favoriteCoins} clickEvent={this.handleRemoveFavorite} tileType='favorite' />\n        <div className=\"index-header\">\n          <input type=\"text\" className=\"text-input\" placeholder=\"Search coins\" value={this.props.filters.text} onChange={this.handleTextChange} />\n          <h2>Add up to 12 favorites</h2>\n        </div>\n        {this.props.coins.length === 0 ? (\n          <div className=\"loading__notificaton\">Loading coin data<FaCircleNotch size=\"2.4rem\" className=\"fa-spin\" /></div>\n        ) : (this.props.visibleCoins && this.props.visibleCoins.length) > 0 ? (\n          <>\n            <Scroller className=\"fave-list fave-list--more\" sliceSize=\"25\" >\n              {\n              this.props.visibleCoins\n                .filter(coin => !this.props.favorites.includes(coin.symbol))\n                .map(coin => (\n                  <FavoriteTile key={coin.symbol} coin={coin} clickEvent={this.handleAddFavorite} tileType={tileType} />\n                ))\n              }\n            </Scroller>\n          </>\n        ) : (\n          <div className=\"loading__notificaton\">No coins found</div>\n        )}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  coins: state.coins,\n  visibleCoins: selectCoins(state.coins, state.filters),\n  favorites: state.favorites,\n  filters: state.filters\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  addFavorite: (favorite) => dispatch(addFavorite(favorite)),\n  removeFavorite: (favorite) => dispatch(removeFavorite(favorite)),\n  editCoin: (symbol, updates) => dispatch(editCoin(symbol, updates)),\n  setTextFilter: (text) => dispatch(setTextFilter(text))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsPage)\n"]},"metadata":{},"sourceType":"module"}